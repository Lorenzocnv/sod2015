<html>
<head>
    <title>LOD events eXplorer</title>
    <link href="scripts/style.css" rel="stylesheet"></link>
    <link href="uduvudu/lib/bootstrap.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script type='text/javascript' src="scripts/timeline.js"></script>
    <script src="uduvudu/lib/underscore-min.js" type="text/javascript"></script>
    <script src="uduvudu/lib/jquery-2.1.3.min.js" type="text/javascript"></script>
    <script src="uduvudu/lib/rdf-ext.min.js"></script>
    <script src="uduvudu/matcher.js" type="text/javascript"></script>
    <script src="uduvudu/src/uduvudu.js" type="text/javascript"></script>
</head>
<body>
<div class="title">
<h1>LOD events eXplorer</h1>
<h3>- Event visualizer for LOD dataset -</h3>
</div>

<div class="outerwrapper">

<div class="timeline">
    <div class="timeline-header">
        <h2><span class="timeline-heading"></span></h2>         
        <p class="timeline-standfirst"></p>
    </div>
    <div class="tooltip">
        <p></p>
    </div>
</div> <!-- timeline -->

<div class="info-box">
    <div class="panel"></div>
</div>

</div> <!-- outerwrapper -->

<div class="forced" id="forced">
    <script src="scripts/forced.js"></script>
</div>

<div id="main"></div>

<div id="templates"></div>

    <script type="text/javascript">
        // instantiate rdf-ext object
        var store = new rdf.LdpStore();
        var source = 'dumps/events.ttl';

       // something about what is going on
        document.getElementById('main').innerHTML =  ''
        + '<div class="alert alert-info">'
        + '  <button type="button" class="close" data-dismiss="alert">&times;</button>'
        + '  <strong>Loading</strong> '+source+' is being loaded ...'
        + '</div>';

        // prepare visualizer templates for uduvudu
        $("#templates").load("/uduvudu/templates.html");

        // load triples
        store.graph(source, function (graph, error) {
                if (error == null) {
                    console.debug("successfully loaded "+graph.toArray().length+" triples");
                    // resource (entry for template search) is same as source in this example
                    uduvudu.process(graph, {'resource': source} , function (out) {
                        // write the result of the processing in the main div
                        $('#main').html(out);
                        });
                    } else {
                        document.getElementById('main').innerHTML =  ''
                        + '<div class="alert alert-danger">'
                        + '  <button type="button" class="close" data-dismiss="alert">&times;</button>'
                        + '  <strong>Error:</strong> '+ error +'.'
                        + '</div>';
                    };
            });
    </script>

</body>
</html>
